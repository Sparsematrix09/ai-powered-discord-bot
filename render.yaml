services:
  # Admin Dashboard (Next.js)
  - type: web
    name: discord-copilot-admin
    env: node
    buildCommand: cd admin-dashboard && npm install && npm run build
    startCommand: cd admin-dashboard && npm start
    envVars:
      - key: NEXT_PUBLIC_SUPABASE_URL
        sync: false
      - key: NEXT_PUBLIC_SUPABASE_ANON_KEY
        sync: false
  
  # Discord Bot (Background Worker)
  - type: worker
    name: discord-copilot-bot
    env: node
    buildCommand: cd discord-bot && npm install
    startCommand: cd discord-bot && node bot.js
    envVars:
      - key: DISCORD_TOKEN
        sync: false
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_ANON_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false